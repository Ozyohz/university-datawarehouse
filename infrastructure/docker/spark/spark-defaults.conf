# =============================================================================
# Apache Spark - Default Configuration
# =============================================================================

# Master settings
spark.master                           spark://spark-master:7077

# Memory settings
spark.driver.memory                    2g
spark.executor.memory                  4g
spark.executor.cores                   2

# Serialization
spark.serializer                       org.apache.spark.serializer.KryoSerializer
spark.kryoserializer.buffer.max        1024m

# SQL settings
spark.sql.extensions                   io.delta.sql.DeltaSparkSessionExtension
spark.sql.catalog.spark_catalog        org.apache.spark.sql.delta.catalog.DeltaCatalog
spark.sql.warehouse.dir                s3a://gold/warehouse

# S3/MinIO settings
spark.hadoop.fs.s3a.endpoint           http://minio:9000
spark.hadoop.fs.s3a.access.key         minioadmin
spark.hadoop.fs.s3a.secret.key         minioadmin123
spark.hadoop.fs.s3a.path.style.access  true
spark.hadoop.fs.s3a.impl               org.apache.hadoop.fs.s3a.S3AFileSystem
spark.hadoop.fs.s3a.connection.ssl.enabled  false

# Delta Lake settings
spark.databricks.delta.retentionDurationCheck.enabled  false
spark.databricks.delta.schema.autoMerge.enabled        true

# Performance tuning
spark.sql.shuffle.partitions           200
spark.sql.files.maxPartitionBytes      134217728
spark.sql.adaptive.enabled             true
spark.sql.adaptive.coalescePartitions.enabled  true

# Logging
spark.eventLog.enabled                 true
spark.eventLog.dir                     s3a://spark-logs/events
spark.history.fs.logDirectory          s3a://spark-logs/events

# UI
spark.ui.port                          4040
spark.ui.enabled                       true
